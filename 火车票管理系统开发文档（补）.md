# 火车票管理系统开发文档（补）

原开发文档部分内容已经与实际代码有一定的出入，故进行一些修改。



**修改出发点**

- 原版本在时间上1182最快也要 40W ms ， 在未放宽时限前若想 AC 必须将时间限制在 25 W内
- 推测：数据中存在有大量的 train 没有 release 否则不可能读两次比一次快



**修改内容**

- 增加了 day_train 类， 采用 B+ 树 <trainID,date> - > day_train 来存储
- 每次 query_ticket 时不仅把车读出来，同时把 day_train 读出来，补充 query_ticket 内容
- 进行了一些小的优化：

- [ ] 将 date 类 压缩成一个 int
- [ ] 几乎去掉了所有 train 赋值
- [ ] release_train 的标记在 train 类头部，并只修改一个 bool 值
- [ ] 把地名指向 <int,int>  前者为 train_pos 直接读出车 后者为 location_pos 读出第几站